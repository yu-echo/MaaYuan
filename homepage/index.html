<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MaaYuan å¯¼èˆªç«™</title>
    <link rel="icon" href="assets/logo.png" type="image/png" />
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: "Microsoft YaHei", Arial, sans-serif;
        background-color: #f7ead8;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        position: relative;
      }

      .container {
        max-width: 1000px;
        width: 100%;
        text-align: center;
        padding: 20px;
        box-sizing: border-box;
      }

      .content-row {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-wrap: wrap;
        gap: 20px;
      }

      .image-container {
        position: relative;
        cursor: pointer;
        flex: 0 0 auto;
        max-width: 50%;
        min-height: 200px;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: transparent;
        width: 500px;
        height: 500px;
        overflow: hidden;
      }

      .preload-container {
        width: 0;
        height: 0;
        overflow: hidden;
        position: absolute;
        top: -9999px;
        left: -9999px;
      }

      .image-container img {
        max-width: 100%;
        opacity: 0;
        transition: opacity 0.3s ease;
        position: relative;
        background-color: transparent;
        z-index: 1;
        max-height: 100%;
        object-fit: contain;
        background-color: transparent;
      }

      .image-container img.loaded {
        opacity: 1;
      }

      .image-tooltip {
        visibility: hidden;
        background-color: rgba(0, 0, 0, 0.75);
        color: #fff;
        text-align: center;
        padding: 8px 12px;
        border-radius: 6px;
        font-size: 14px;
        position: absolute;
        z-index: 20;
        white-space: nowrap;
        opacity: 0;
        transition: opacity 0.3s;
        pointer-events: none;
      }

      .image-container:hover .image-tooltip {
        visibility: visible;
        opacity: 1;
      }

      .overlay-text {
        flex: 1 1 300px;
        font-size: 36px;
        font-weight: bold;
        color: #493b2c;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        padding: 20px;
        background-color: #dfcbb2;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }

      .hint-text {
        display: block;
        font-size: 16px;
        font-weight: normal;
        color: #666;
        margin-top: 15px;
      }

      .highlight-text {
        color: rgba(194, 132, 0, 0.87);
        cursor: help;
        position: relative;
        transition: color 0.3s;
      }

      .highlight-text:hover {
        color: rgb(206, 144, 12);
      }

      .highlight-text .tooltip {
        visibility: hidden;
        background-color: #333;
        color: #fff;
        text-align: center;
        padding: 5px 10px;
        border-radius: 4px;
        font-size: 14px;
        font-weight: normal;
        position: absolute;
        z-index: 10;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        white-space: nowrap;
        opacity: 0;
        transition: opacity 0.3s;
      }

      .highlight-text:hover .tooltip {
        visibility: visible;
        opacity: 1;
      }

      .highlight-text .tooltip::after {
        content: "";
        position: absolute;
        top: 10%;
        left: 50%;
        margin-left: -5px;
        border-width: 5px;
        border-style: solid;
        border-color: #333 transparent transparent transparent;
      }

      .normal-content {
        display: none;
        flex: 1 1 300px;
        text-align: left;
        padding: 20px;
        background-color: #dfcbb2;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        position: relative;
        z-index: 10;
      }

      .normal-content h2 {
        color: #493b2c;
        margin-top: 0;
        text-shadow: 1px 1px 3px rgba(255, 251, 251, 0.805);
      }

      .normal-content h3 {
        color: #493b2c;
        margin-top: 10px;
        text-shadow: 1px 1px 3px rgba(255, 251, 251, 0.805);
      }

      .normal-content p {
        color: #2a251a;
        line-height: 1.6;
        text-shadow: 1px 1px 3px rgba(255, 251, 251, 0.805);
      }

      .normal-content a {
        display: inline-block;
        margin-top: 10px;
        padding: 8px 16px;
        background-color: #d4822a;
        color: #d8dff3;
        text-decoration: none;
        border-radius: 5px;
        font-weight: bold;
        width: 150px;
        margin: 10px;
        text-align: center;
        box-sizing: border-box;
      }

      .normal-content a:hover {
        background-color: rgba(214, 156, 29, 0.87);
      }

      .normal-content .text-link {
        display: inline;
        margin: 0;
        padding: 0;
        background-color: transparent;
        color: #b76b0f;
        font-weight: normal;
        width: auto;
      }

      .normal-content .text-link:hover {
        background-color: transparent;
        color: #8f5112;
      }

      .click-area {
        position: absolute;
        width: 200px;
        height: 200px;
        top: 60%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 5;
        cursor: pointer;
      }

      /* ç§»åŠ¨ç«¯ä¼˜åŒ– */
      @media (max-width: 768px) {
        .content-row {
          flex-direction: column;
          gap: 15px;
        }

        .container {
          padding: 15px 10px;
        }

        .image-container {
          max-width: 100%;
          width: 100%;
          height: auto;
          max-height: 400px;
        }

        .image-container img {
          max-width: 100%;
          max-height: 350px;
        }

        .overlay-text,
        .normal-content {
          font-size: 22px;
          width: 95%;
          padding: 15px;
          margin: 0 auto;
        }

        .overlay-text {
          max-height: 100px; /* é™åˆ¶æœ€å¤§é«˜åº¦ */
        }

        .hint-text {
          font-size: 14px;
          margin-top: 10px;
        }

        .normal-content h2 {
          font-size: 24px;
        }

        .normal-content h3 {
          font-size: 20px;
        }

        .normal-content p {
          font-size: 16px;
        }

        .normal-content a {
          width: 40%;
          margin: 10px auto;
          padding: 12px 15px;
          border-radius: 8px;
          font-size: 16px;
          text-align: center;
          display: block;
        }

        .normal-content .text-link {
          display: inline;
          width: auto;
          margin: 0;
          padding: 0;
          border-radius: 0;
          background-color: transparent;
        }

        .click-area {
          width: 150px;
          height: 150px;
        }

        /* æ”¹è¿›tooltipçš„è§¦æ‘¸äº¤äº’ */
        .image-tooltip {
          max-width: 90%;
          padding: 10px 15px;
          font-size: 14px;
          line-height: 1.5;
          left: 50% !important;
          transform: translateX(-50%);
          bottom: 20px;
          top: auto !important;
        }
      }

      /* å°å±å¹•æ‰‹æœºä¼˜åŒ– */
      @media (max-width: 480px) {
        .image-container {
          height: 300px;
          max-height: 300px;
        }

        .image-container img {
          max-height: 250px;
        }

        .overlay-text {
          height: auto;
          min-height: 0;
          max-height: 100px; /* é™åˆ¶æœ€å¤§é«˜åº¦ */
          padding: 15px 10px;
          font-size: 22px;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          width: 90%;
          margin: 0 auto;
        }

        .hint-text {
          margin-top: 10px;
          font-size: 14px;
          line-height: 1.3;
        }

        .normal-content {
          font-size: 18px;
          padding: 15px;
          width: 90%;
          margin: 0 auto;
        }

        .normal-content h2 {
          font-size: 20px;
        }

        .normal-content h3 {
          font-size: 18px;
        }

        .normal-content a {
          width: 80%;
          margin: 8px auto;
          padding: 10px;
        }
      }

      /* æ·»åŠ å»¶è¿ŸåŠ è½½æ ·å¼ */
      .lazy-load {
        opacity: 0;
        transition: opacity 0.5s ease;
      }

      .lazy-load.loaded {
        opacity: 1;
      }

      /* ç§»åŠ¨ç«¯è§¦æ‘¸åé¦ˆ */
      @media (hover: none) {
        .image-container:active {
          transform: scale(0.98);
        }

        .normal-content a:active {
          background-color: #b5681f;
        }
      }

      /* è®©ä¸‹è½½é“¾æ¥åŒºåŸŸæ›´æ•´é½ */
      .normal-content .download-links {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <!-- é¢„åŠ è½½æ‰€æœ‰å¯èƒ½ç”¨åˆ°çš„å›¾ç‰‡ -->
    <div class="preload-container">
      <img src="assets/cat.png" alt="çŒ«å›¾é¢„åŠ è½½" />
      <img src="assets/dog.png" alt="ç‹—å›¾é¢„åŠ è½½" />
      <img src="assets/fox.png" alt="ç‹å›¾é¢„åŠ è½½" />
    </div>

    <div class="container">
      <div class="content-row">
        <div class="image-container">
          <img
            id="randomImage"
            src=""
            alt="éº»åœ†æ„šäººèŠ‚å½©è›‹"
            width="500"
            height="500"
          />
          <div class="click-area" id="clickArea"></div>
          <div class="image-tooltip">
            ğŸ˜­ æ±‚ä½ åˆ«çœ‹äº†ï¼Œæˆ‘ä»åˆä¸­æ¯•ä¸šå°±æ²¡ç”»è¿‡ç”»äº†<br />çº¯PSé¢†åŸŸæ‹¼è´´ç”»æ¥çš„
          </div>
        </div>
        <div class="overlay-text">
          æ‰¾éº»åœ†ï¼ˆMaaYuanï¼‰æ‰¾åˆ°è¿™æ¥äº†ï¼ï¼Ÿ<span class="hint-text"
            >æ­»é¸Ÿä¸è€å®ï¼Œæˆ³æˆ³é¸Ÿå±è‚¡</span
          >
        </div>
        <div class="normal-content" id="normalContent">
          <h2>ğŸ¥³ æ„Ÿè°¢å…³æ³¨ MaaYuan é¡¹ç›®</h2>
          <p>MaaYuan æ˜¯åŸºäºå›¾åƒè¯†åˆ«çš„ä»£å·é¸¢/å¦‚é¸¢ä¸€é”®é•¿è‰å°åŠ©æ‰‹ã€‚</p>
          <p>
            æœ¬é¡¹ç›®å…è´¹å¼€æºï¼Œä»…é€šè¿‡æ¸¸æˆæä¾›çš„ç”¨æˆ·ç•Œé¢ä¸æ¸¸æˆç¨‹åºè¿›è¡Œäº¤äº’ï¼Œä¸ä¼šè¯»å–æˆ–ä¿®æ”¹æ¸¸æˆçš„æ–‡ä»¶æˆ–ä»£ç ã€‚
          </p>
          <p>ä»¥ä¸‹è¾…åŠ©é¡¹ç›®åŒæ­¥å¼€å‘ä¸­ï¼Œæ¬¢è¿è´¡çŒ®ä»£ç ï¼š</p>
          <p>
            Â· å¯è§†åŒ–ç•Œé¢ -
            <a
              href="https://github.com/syoius/MFAAvalonia"
              class="text-link"
              target="_blank"
              >YuanMFA</a
            >ï¼ˆç°å·²æ”¯æŒWinã€Macã€Linuxï¼‰
          </p>
          <p>
            Â· æˆ˜æ–—ä½œä¸šç¼–è¾‘å™¨ -
            <a
              href="https://github.com/syoius/MaaYuan-SiMing"
              class="text-link"
              target="_blank"
              >å¸å‘½</a
            >
          </p>
          <h3>ğŸ‘‡ ä¸‹è½½ MaaYuan ï¼ˆå½“å‰ç‰ˆæœ¬ v0.9.4.3ï¼‰</h3>
          <div class="download-links">
            <a href="https://docs.qq.com/aio/DS1BMQmpiQkdOb1RT" target="_blank"
              >æ–‡æ¡£ä¸å›½å†…åˆ†æµ</a
            >
            <a href="https://github.com/syoius/MaaYuan" target="_blank"
              >GitHub ä»“åº“</a
            >
          </div>
          <h3>ğŸ”— å…¶ä»–å®ç”¨é“¾æ¥</h3>
          <div class="download-links">
            <a href="https://pd.qq.com/s/7blnnchll" target="_blank"
              >äº¤æµåé¦ˆé¢‘é“</a
            >
            <a href="https://siming.cruisingcat.top/" target="_blank"
              >æˆ˜æ–—ä½œä¸šç¼–è¾‘å™¨</a
            >
            <a
              href="https://td3nqr3477.feishu.cn/base/BtwRb6yvxaRAsis3uVCccLVKnWg?table=tbl6DolUZQaGOMIb&view=vew54wfNwm"
              target="_blank"
              >æŸ¥è¯¢ä¸‹è½½ä½œä¸š</a
            >
            <a
              href="https://td3nqr3477.feishu.cn/share/base/form/shrcnJX0flRpMVVLdsBIb1L0MRh"
              target="_blank"
              >åˆ†äº«ä¸Šä¼ ä½œä¸š</a
            >
          </div>
        </div>
      </div>
    </div>

    <script>
      // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
      document.addEventListener("DOMContentLoaded", function () {
        // ä¿®å¤çª„å±å›¾ç‰‡åˆå§‹åŒ–é—®é¢˜
        function checkImagesExist() {
          // æ£€æµ‹å›¾ç‰‡æ˜¯å¦å­˜åœ¨çš„å‡½æ•°
          function imageExists(url, callback) {
            const img = new Image();
            img.onload = function () {
              callback(true);
            };
            img.onerror = function () {
              callback(false);
            };
            img.src = url;
          }

          // æ£€æŸ¥å¯èƒ½çš„ç§»åŠ¨ç‰ˆå›¾ç‰‡æ˜¯å¦å­˜åœ¨
          const checkPromises = [];
          [
            "assets/cat-mobile.png",
            "assets/dog-mobile.png",
            "assets/fox-mobile.png",
          ].forEach((path) => {
            checkPromises.push(
              new Promise((resolve) => {
                imageExists(path, (exists) => {
                  resolve({ path: path, exists: exists });
                });
              })
            );
          });

          return Promise.all(checkPromises);
        }

        // æ£€æŸ¥ç§»åŠ¨å›¾ç‰‡æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ç›¸åº”é…ç½®
        checkImagesExist().then((results) => {
          const hasMobileImages = results.some((result) => result.exists);

          // å›¾ç‰‡è·¯å¾„å’Œå¤§å°é…ç½®
          const imageConfig = {
            desktop: {
              paths: ["assets/cat.png", "assets/dog.png", "assets/fox.png"],
              width: 500,
              height: 500,
            },
            mobile: {
              // æ ¹æ®æ£€æµ‹ç»“æœå†³å®šæ˜¯ä½¿ç”¨ç§»åŠ¨ç‰ˆå›¾ç‰‡è¿˜æ˜¯æ¡Œé¢ç‰ˆå›¾ç‰‡
              paths: hasMobileImages
                ? [
                    "assets/cat-mobile.png",
                    "assets/dog-mobile.png",
                    "assets/fox-mobile.png",
                  ]
                : ["assets/cat.png", "assets/dog.png", "assets/fox.png"],
              width: 350,
              height: 350,
            },
          };

          // åˆ¤æ–­æ˜¯å¦ä¸ºç§»åŠ¨è®¾å¤‡
          const isMobile = window.innerWidth <= 768;

          // é€‰æ‹©åˆé€‚çš„å›¾ç‰‡é…ç½®
          const currentConfig = isMobile
            ? imageConfig.mobile
            : imageConfig.desktop;

          // é¢„åŠ è½½å›¾ç‰‡
          const preloadContainer = document.querySelector(".preload-container");
          currentConfig.paths.forEach((path) => {
            const img = document.createElement("img");
            img.src = path;
            img.alt = "é¢„åŠ è½½å›¾ç‰‡";
            img.style.display = "none";
            preloadContainer.appendChild(img);
          });

          let currentIndex = Math.floor(
            Math.random() * currentConfig.paths.length
          );
          let selectedImage = currentConfig.paths[currentIndex];
          let normalContentShown = false;

          // æ£€æµ‹æ˜¯å¦ä¸ºè§¦æ‘¸è®¾å¤‡
          const isTouchDevice =
            "ontouchstart" in window ||
            navigator.maxTouchPoints > 0 ||
            navigator.msMaxTouchPoints > 0;

          // ç«‹å³è®¾ç½®å›¾ç‰‡æº
          const randomImage = document.getElementById("randomImage");
          const imageTooltip = document.querySelector(".image-tooltip");
          const originalTooltipText = imageTooltip.innerHTML;
          const switchTooltipText = "ğŸ˜­ æ±‚ä½ åˆ«çœ‹äº†ï¼Œæˆ³å°±å®Œäº‹äº†";

          // ç§»é™¤ä¹‹å‰åœ¨touchDeviceæ¡ä»¶ä¸‹çš„tooltipè‡ªåŠ¨æ˜¾ç¤ºä»£ç 
          // æ”¹ä¸ºæ‰€æœ‰è®¾å¤‡éƒ½ç”±é¼ æ ‡æ‚¬åœ/ç‚¹å‡»è§¦å‘tooltip

          // è®¾ç½®ä¸€ä¸ªåŠ è½½å ä½å›¾
          randomImage.src =
            'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="500" height="500" viewBox="0 0 300 300"%3E%3Crect width="500" height="500" fill="rgba(223, 203, 178, 0.3)"%3E%3C/rect%3E%3C/svg%3E';

          // æ›´æ–°å›¾ç‰‡çš„å‡½æ•°
          function updateImage(imgSrc) {
            // åˆ›å»ºä¸€ä¸ªæ–°å›¾åƒå¯¹è±¡é¢„åŠ è½½å®é™…å›¾ç‰‡
            const img = new Image();
            img.onload = function () {
              // çœŸå®å›¾ç‰‡åŠ è½½å®Œæˆåæ›¿æ¢
              randomImage.src = imgSrc;
              randomImage.classList.add("loaded");

              // æ›´æ–°æ–‡å­—ï¼ˆå¦‚æœnormal-contentæœªæ˜¾ç¤ºï¼‰
              if (!normalContentShown) {
                updateOverlayText(imgSrc);
              }
            };

            // æ·»åŠ å›¾ç‰‡åŠ è½½é”™è¯¯å¤„ç†
            img.onerror = function () {
              console.error("å›¾ç‰‡åŠ è½½å¤±è´¥: " + imgSrc);
              // å¦‚æœæ˜¯å°è¯•åŠ è½½ç§»åŠ¨ç‰ˆå›¾ç‰‡å¤±è´¥ï¼Œå°è¯•åŠ è½½æ¡Œé¢ç‰ˆ
              if (imgSrc.indexOf("-mobile") > -1) {
                const desktopSrc = imgSrc.replace("-mobile", "");
                console.log("å°è¯•åŠ è½½æ¡Œé¢ç‰ˆå›¾ç‰‡: " + desktopSrc);
                updateImage(desktopSrc);
              }
            };

            img.src = imgSrc;
          }

          // æ›´æ–°æ–‡å­—çš„å‡½æ•°
          function updateOverlayText(imgSrc) {
            const overlayText = document.querySelector(".overlay-text");

            // ç®€åŒ–å›¾ç‰‡è·¯å¾„åˆ¤æ–­ï¼Œå»é™¤-mobileåç¼€
            const baseSrc = imgSrc.replace("-mobile", "");

            if (baseSrc.indexOf("cat.png") > -1) {
              overlayText.innerHTML =
                'è¿™é‡Œæ˜¯çŒ«å›­<br>è°åœ¨æ‰¾<span class="highlight-text">éº»åœ†<span class="tooltip">MaaYuan</span></span>ï¼ï¼Ÿï¼<span class="hint-text">æ­»é¸Ÿä¸è€å®ï¼Œæˆ³æˆ³é¸Ÿå±è‚¡</span>';
            } else if (baseSrc.indexOf("dog.png") > -1) {
              overlayText.innerHTML =
                'è¿™é‡Œæ˜¯ç‹—å›­<br>è°åœ¨æ‰¾<span class="highlight-text">éº»åœ†<span class="tooltip">MaaYuan</span></span>ï¼ï¼Ÿï¼<span class="hint-text">æ­»é¸Ÿä¸è€å®ï¼Œæˆ³æˆ³é¸Ÿå±è‚¡</span>';
            } else if (baseSrc.indexOf("fox.png") > -1) {
              overlayText.innerHTML =
                'è¿™é‡Œæ˜¯ç‹å›­<br>è°åœ¨æ‰¾<span class="highlight-text">éº»åœ†<span class="tooltip">MaaYuan</span></span>ï¼ï¼Ÿï¼<span class="hint-text">æ­»é¸Ÿä¸è€å®ï¼Œæˆ³æˆ³é¸Ÿå±è‚¡</span>';
            }
          }

          // éšæœºåˆ‡æ¢å›¾ç‰‡çš„å‡½æ•°
          function switchRandomImage() {
            // éšæœºé€‰æ‹©ä¸€ä¸ªä¸åŒçš„ç´¢å¼•
            let newIndex;
            do {
              newIndex = Math.floor(Math.random() * currentConfig.paths.length);
            } while (
              newIndex === currentIndex &&
              currentConfig.paths.length > 1
            );

            currentIndex = newIndex;
            selectedImage = currentConfig.paths[currentIndex];

            // æ›´æ–°å›¾ç‰‡
            randomImage.classList.remove("loaded");
            setTimeout(() => {
              updateImage(selectedImage);
            }, 300); // ç­‰å¾…æ·¡å‡ºåŠ¨ç”»å®Œæˆ
          }

          // åˆå§‹åŠ è½½å›¾ç‰‡
          updateImage(selectedImage);

          randomImage.onload = function () {
            if (this.src.indexOf("data:image") === -1) {
              this.classList.add("loaded");
            }
          };

          // å¦‚æœå›¾ç‰‡å·²ç»åœ¨ç¼“å­˜ä¸­ï¼Œå¯èƒ½onloadä¸ä¼šè§¦å‘ï¼Œæ‰€ä»¥æ£€æŸ¥completeå±æ€§
          if (
            randomImage.complete &&
            randomImage.src.indexOf("data:image") === -1
          ) {
            randomImage.classList.add("loaded");
          }

          // é¼ æ ‡ç§»åŠ¨äº‹ä»¶å¤„ç†
          const imageContainer = document.querySelector(".image-container");

          // ç”µè„‘ç«¯tooltipæ˜¾ç¤ºï¼Œå…è®¸åœ¨normal contentæ¿€æ´»åä»æ˜¾ç¤ºtooltip
          if (!isTouchDevice) {
            imageContainer.addEventListener("mousemove", function (e) {
              // è·å–é¼ æ ‡ç›¸å¯¹äºå®¹å™¨çš„ä½ç½®
              const rect = imageContainer.getBoundingClientRect();
              const x = e.clientX - rect.left;
              const y = e.clientY - rect.top;

              // è®¾ç½®tooltipä½ç½®ï¼Œç¨å¾®åç§»ä»¥é¿å…é®æŒ¡é¼ æ ‡
              imageTooltip.style.left = x + 10 + "px";
              imageTooltip.style.top = y - 30 + "px";

              // ç¡®ä¿tooltipå¯è§
              imageTooltip.style.visibility = "visible";
              imageTooltip.style.opacity = "1";

              // æ ¹æ®normal contentæ˜¾ç¤ºçŠ¶æ€è®¾ç½®ä¸åŒçš„tooltipæ–‡æœ¬
              if (normalContentShown) {
                imageTooltip.innerHTML = switchTooltipText;
              } else {
                imageTooltip.innerHTML = originalTooltipText;
              }
            });

            // é¼ æ ‡ç§»å‡ºæ—¶éšè—tooltip
            imageContainer.addEventListener("mouseleave", function () {
              imageTooltip.style.visibility = "hidden";
              imageTooltip.style.opacity = "0";
            });
          } else {
            // è§¦æ‘¸è®¾å¤‡ç‚¹å‡»å›¾ç‰‡æ˜¾ç¤ºtooltip
            imageContainer.addEventListener("click", function (e) {
              if (normalContentShown) {
                // å·²æ¿€æ´»normal contentï¼Œæ‰§è¡Œå›¾ç‰‡åˆ‡æ¢
                switchRandomImage();
                return;
              }

              // æ˜¾ç¤ºtooltip
              if (
                imageTooltip.style.visibility === "hidden" ||
                imageTooltip.style.opacity === "0"
              ) {
                imageTooltip.style.visibility = "visible";
                imageTooltip.style.opacity = "1";

                // è®¾ç½®tooltipä½ç½®
                const rect = imageContainer.getBoundingClientRect();
                imageTooltip.style.left = "50%";
                imageTooltip.style.top = rect.height - 60 + "px";
                imageTooltip.style.transform = "translateX(-50%)";

                // 2ç§’åéšè—
                setTimeout(() => {
                  imageTooltip.style.opacity = "0";
                  setTimeout(() => {
                    imageTooltip.style.visibility = "hidden";
                  }, 300);
                }, 2000);
              }
            });
          }

          // ç‚¹å‡»åŒºåŸŸäº‹ä»¶
          const clickArea = document.getElementById("clickArea");
          const normalContent = document.getElementById("normalContent");
          const overlayText = document.querySelector(".overlay-text");

          clickArea.addEventListener("click", function () {
            if (!normalContentShown) {
              // é¦–æ¬¡ç‚¹å‡»æ˜¾ç¤ºnormal-content
              overlayText.style.display = "none";
              normalContent.style.display = "block";
              normalContentShown = true;

              // ç¡®ä¿é¼ æ ‡äº‹ä»¶åœ¨normal contentæ˜¾ç¤ºåä»èƒ½æ­£å¸¸å·¥ä½œ
              imageContainer.style.zIndex = "15";

              // ç§»é™¤click-areaï¼Œè®©å›¾ç‰‡å¯ä»¥è¢«ç‚¹å‡»
              clickArea.style.display = "none";

              // ä¸ºå›¾ç‰‡æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œç”¨äºåˆ‡æ¢å›¾ç‰‡
              randomImage.style.cursor = "pointer";
              if (!isTouchDevice) {
                // éè§¦æ‘¸è®¾å¤‡æ‰æ·»åŠ ç‚¹å‡»äº‹ä»¶
                imageContainer.addEventListener("click", switchRandomImage);
              }

              // æ›´æ”¹tooltipæ–‡æœ¬ä½†ä¸éšè—å®ƒ
              imageTooltip.innerHTML = switchTooltipText;
            }
          });

          // æ€§èƒ½ä¼˜åŒ–ï¼šé˜²æ­¢æ»šåŠ¨äº‹ä»¶å’Œresizeäº‹ä»¶è¿‡åº¦è§¦å‘
          let resizeTimer;
          window.addEventListener("resize", function () {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(function () {
              // æ›´æ–°æ˜¯å¦ä¸ºç§»åŠ¨è®¾å¤‡
              const newIsMobile = window.innerWidth <= 768;

              // ç§»é™¤é‡è½½é¡µé¢çš„é€»è¾‘ï¼Œæ”¹ä¸ºè°ƒæ•´UI
              if (newIsMobile !== isMobile) {
                // æ›´æ–°å½“å‰è®¾å¤‡ç±»å‹
                isMobile = newIsMobile;

                // è°ƒæ•´å›¾ç‰‡æºä»¥åŒ¹é…æ–°çš„è®¾å¤‡ç±»å‹
                if (normalContentShown) {
                  // é‡æ–°åŠ è½½å½“å‰å›¾ç‰‡çš„é€‚åˆç‰ˆæœ¬
                  updateImage(currentConfig.paths[currentIndex]);
                }
              }

              // æ ¹æ®æ–°çš„è§†å£å¤§å°è°ƒæ•´ç‚¹å‡»åŒºåŸŸ
              if (window.innerWidth <= 480) {
                clickArea.style.width = "120px";
                clickArea.style.height = "120px";
              } else if (window.innerWidth <= 768) {
                clickArea.style.width = "150px";
                clickArea.style.height = "150px";
              } else {
                clickArea.style.width = "200px";
                clickArea.style.height = "200px";
              }
            }, 250);
          });

          // è§¦å‘ä¸€æ¬¡resizeäº‹ä»¶ä»¥åˆå§‹åŒ–å¤§å°
          window.dispatchEvent(new Event("resize"));

          // ç§»åŠ¨ç«¯å¤„ç†å±å¹•æ–¹å‘å˜åŒ–
          window.addEventListener("orientationchange", function () {
            // çŸ­æš‚å»¶è¿Ÿï¼Œç­‰å¾…å¸ƒå±€è°ƒæ•´
            setTimeout(function () {
              // é‡æ–°è°ƒæ•´tooltipä½ç½®
              if (
                isTouchDevice &&
                imageTooltip.style.visibility === "visible"
              ) {
                const rect = imageContainer.getBoundingClientRect();
                imageTooltip.style.left = "50%";
                imageTooltip.style.top = rect.height - 60 + "px";
              }
            }, 300);
          });

          // ä¼˜åŒ–è§¦æ‘¸è®¾å¤‡ç‚¹å‡»ä½“éªŒ
          if (isTouchDevice) {
            // ä¸ºæ‰€æœ‰é“¾æ¥æ·»åŠ è§¦æ‘¸åé¦ˆ
            const allLinks = document.querySelectorAll(".normal-content a");
            allLinks.forEach((link) => {
              link.addEventListener("touchstart", function () {
                this.style.transform = "scale(0.98)";
              });

              link.addEventListener("touchend", function () {
                this.style.transform = "scale(1)";
              });
            });
          }
        });
      });
    </script>
  </body>
</html>
